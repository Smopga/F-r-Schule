<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Ausweich-Spiel</title>
<style>
    body {
        margin: 0;
        background-color: #111;
        color: white;
        font-family: Arial, sans-serif;
        overflow: hidden;
    }
    canvas {
        display: block;
        margin: auto;
        background-color: #222;
        border: 3px solid #fff;
    }
    #score {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 24px;
    }
</style>
</head>
<body>
<div id="score">Punkte: 0</div>
<canvas id="gameCanvas" width="600" height="800"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const player = {
    x: canvas.width / 2 - 25,
    y: canvas.height - 60,
    width: 50,
    height: 50,
    color: 'lime',
    speed: 7
};

let obstacles = [];
let score = 0;
let gameOver = false;

// Steuerung
const keys = {};
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Hindernisse erzeugen
function spawnObstacle() {
    const width = Math.random() * 100 + 20;
    const x = Math.random() * (canvas.width - width);
    const speed = Math.random() * 3 + 2;
    obstacles.push({x, y: -50, width, height: 30, speed, color: 'red'});
}

// Update-Spiel
function update() {
    if (gameOver) return;

    // Spieler bewegen
    if (keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
    if (keys['ArrowRight'] && player.x + player.width < canvas.width) player.x += player.speed;

    // Hindernisse bewegen
    obstacles.forEach(obs => obs.y += obs.speed);

    // Kollision prüfen
    obstacles.forEach(obs => {
        if (
            player.x < obs.x + obs.width &&
            player.x + player.width > obs.x &&
            player.y < obs.y + obs.height &&
            player.y + player.height > obs.y
        ) {
            gameOver = true;
        }
    });

    // Punkte zählen & Hindernisse entfernen
    obstacles = obstacles.filter(obs => {
        if (obs.y > canvas.height) {
            score++;
            document.getElementById('score').innerText = 'Punkte: ' + score;
            return false;
        }
        return true;
    });
}

// Zeichnen
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Spieler
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);

    // Hindernisse
    obstacles.forEach(obs => {
        ctx.fillStyle = obs.color;
        ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
    });

    if (gameOver) {
        ctx.fillStyle = 'white';
        ctx.font = '48px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('Game Over', canvas.width / 2, canvas.height / 2);
        ctx.font = '24px Arial';
        ctx.fillText('Punkte: ' + score, canvas.width / 2, canvas.height / 2 + 40);
    }
}

// Hauptschleife
function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

// Hindernisse regelmäßig spawnen
setInterval(spawnObstacle, 1500);

gameLoop();
</script>
</body>
</html>
